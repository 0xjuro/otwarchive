<!-- descriptions-->
<div id="collection-page" class="profile">
  <!-- /descriptions-->
  <!--subnavigation, sorting and actions-->
  <!--/subnav-->
  <!--main content-->
  <h3><%= t('challenge_signups.view', :default => "Signup for {{person}}", :person => @challenge_signup.pseud.byline) -%></h3>

  <div class="collection preface">
    <% @challenge_signup.requests.each_with_index do |request, index| %>
    <h3><%=h t('signup.show.request', :default => "Request {{num}}", :num => index+1) %></h3>
    <div class="wrapper">
      <dl class="collection meta">
        <%= request.url.blank? ? "" : "<dt>URL:</dt><dd>" + link_to(request.url, request.url) + "</dd>" -%>
        <%= request.description.blank? ? "" : "<dt>Details:</dt><dd>" + sanitize_and_format_for_display(request.description) + "</dd>" %>        
        <% if request.tag_set && !request.tag_set.tags.empty? %>
          <dt>Tags:</dt>
          <dd>
            <ul class="tags">
              <%= tag_link_list request.tag_set.tags %>
            </ul>
            <% if request.optional_tag_set && !request.optional_tag_set.tags.empty? %>
              <p>Optional:</p>
              <ul class="tags">
                <%= tag_link_list request.optional_tag_set.tags %>
              </ul>
            <% end %>
          </dd>
        <% end %>
      </dl>
    </div>
    <% end %>

    <% @challenge_signup.offers.each_with_index do |offer, index| %>
    <h3><%=h t('signup.show.offer', :default => "Offer {{num}}", :num => index+1) %></h3>
    <div class="wrapper">
      <dl class="collection meta">
        <%= offer.url.blank? ? "" : "<dt>URL:</dt><dd>" + link_to(offer.url, offer.url) + "</dd>" -%>
        <%= offer.description.blank? ? "" : "<dt>Details:</dt><dd>" + sanitize_and_format_for_display(offer.description) + "</dd>" %>
        <% if offer.tag_set && !offer.tag_set.tags.empty? %>        
          <dt>Tags:</dt>
          <dd>
            <ul class="tags">
              <%= tag_link_list offer.tag_set.tags %>
            </ul>
            <% if offer.optional_tag_set && !offer.optional_tag_set.tags.empty? %>
              <p>Optional:</p>
              <ul class="tags">
                <%= tag_link_list offer.optional_tag_set.tags %>
              </ul>
            <% end %>
          </dd>
        <% end -%>
      </dl>
    </div>
    <% end %>
  </div>
  <!--/content-->

  <!--subnav-->
  <ul class="navigation" role="navigation">
    <li><%= link_to 'Edit', edit_collection_signup_path(@collection, @challenge_signup) %></li>
    <li>
      <%= link_to t('challenge_signup.delete_signup', :default => "Delete"), 
        collection_signup_path(@collection, @challenge_signup), 
        :confirm => t('challenge_signup.confirm_delete_signup', :default => "Are you sure you want to delete your signup? All information will be lost."), 
        :method => :delete %>
    </li>
    <li><%= link_to 'Back', @collection %></li>
  </ul>
  <!--/subnav-->
</div>

