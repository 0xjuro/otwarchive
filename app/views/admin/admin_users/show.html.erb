<div class="admin">
  <!--Descriptive page name, messages and instructions-->
  <h2 class="heading"><%= t('admin.admin_users.show.page_heading') %>: <%= @user.login %></h2>
  <!--/descriptions-->

  <!--subnav-->
  <ul class="navigation actions" role="navigation">
    <li>
      <%= button_to t('admin.admin_users.show.subnav.send_activation'), {:action => 'send_activation', :id => @user}, disabled: @user.active? %>
    </li>
    <li>
      <%= button_to t('admin.admin_users.show.subnav.activate_user'), {:action => 'activate', :id => @user}, disabled: @user.active? %>
    </li>
    <li>
      <%= link_to t('admin.admin_users.show.subnav.manage_user'), {:action => "index", :query => @user.login, :role => '0'} %>
    </li>
  </ul>
  <!--/subnav-->

  <!--main content-->
  <h3 class="heading"><%= t('admin.admin_users.show.form_heading') %></h3>
  <%= form_tag :action => "update_user", :controller => "admin/admin.admin_users.show" do %>
    <%= hidden_field_tag 'user_login', @user.login %>
    <fieldset>
      <legend><%= t('admin.admin_users.show.form.fnok.legend') %></legend>
      <h4 class="heading"><%= t('admin.admin_users.show.form.fnok.heading') %></h4>
      <dl>
        <dt>
          <%= label_tag 'next_of_kin_name', t('admin.admin_users.show.form.fnok.name') %>
        </dt>
        <dd>
          <%= text_field_tag 'next_of_kin_name', @user.fannish_next_of_kin.present? ? @user.fannish_next_of_kin.kin_name : '' %>
        </dd>
        <dt>
          <%= label_tag 'next_of_kin_email', t('admin.admin_users.show.form.fnok.email') %>
        </dt>
        <dd>
          <%= text_field_tag 'next_of_kin_email', @user.fannish_next_of_kin.present? ? @user.fannish_next_of_kin.kin_email : '' %>
        </dd>
      </dl>
    </fieldset>
    <fieldset>
      <legend><%= t('admin.admin_users.show.form.admin_actions.legend') %></legend>
      <h4 class="heading"><%= t('admin.admin_users.show.form.admin_actions.heading') %></h4>
      <ul>
        <li>
          <%= radio_button_tag 'admin_action', 'warn' %>
          <%= label_tag 'admin_action_warn', t('admin.admin_users.show.form.admin_actions.warn_label') %>
        </li>
        <li>
          <% if @user.suspended? %>
            <%= radio_button_tag 'admin_action', 'unsuspend', false %>
            <%= label_tag 'admin_action_unsuspend', t('admin.admin_users.show.form.admin_actions.unsuspend_label') %>
          <% else %>
            <%= radio_button_tag 'admin_action', 'suspend', false, disabled: @user.banned? %>
            <%= label_tag 'admin_action_suspend', t('admin.admin_users.show.form.admin_actions.suspend_label') %>
            <%= text_field_tag 'suspend_days', '', class: 'number', size: 2, disabled: @user.banned? %>
            <%= live_validation_for_field('suspend_days', presence: false, numericality: true) %> 
          <% end %>
        </li> 
        <li>
          <% if @user.banned? %> 
            <%= radio_button_tag 'admin_action', 'unban', false %>
            <%= label_tag 'admin_action_unban', t('admin.admin_users.show.form.admin_actions.unban_label') %>
          <% else %>
            <%= radio_button_tag 'admin_action', 'ban', false %>
            <%= label_tag 'admin_action_ban', t('admin.admin_users.show.form.admin_actions.ban_label') %>
          <% end %>
        </li>
      </ul>
    </fieldset>
    <fieldset>
      <legend><%= t('admin.admin_users.show.form.notes.legend') %></legend>
      <h4 class="heading"><%= label_tag 'admin_note', t('admin.admin_users.show.form.notes.heading_label') %></h4>
      <p class="note">
        <%= t('admin.admin_users.show.form.notes.required_note') %>
      </p>
      <p>
        <%= text_area_tag 'admin_note', nil, class: 'observe_textlength' %>
        <%= generate_countdown_html('admin_note', ArchiveConfig.LOGNOTE_MAX) %>
      </p>
    </fieldset>

    <p class="submit"><%= submit_tag t('admin.admin_users.show.form.submit') %></p>
  <% end %>

  <%= render 'user_history', user: @user %>
  <!--/content-->
</div>
