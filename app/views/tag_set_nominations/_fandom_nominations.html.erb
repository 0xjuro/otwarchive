<fieldset class="tagset <%= cycle :odd, :even %>">
  <legend><%= ts("Fandom %{index}", :index => fandom_nominations_counter+1) %></legend>
  <dl>
    <dt><%= nom_form.label :tagname, ts("Fandom %{index}", :index => fandom_nominations_counter+1) %></dt>
    <dd>
      <% if nom.approved || nom.rejected %>
        <%= nom.tagname %>
      <% else %>
        <%= nom_form.text_field :tagname, autocomplete_options("fandom", :autocomplete_token_limit => 1, :class => "autocomplete_with_canon_check") %>
      <% end %>
      <%= nomination_status(nom) %>
    </dd>
    <dd class="tagname info<%= noncanonical_info_class(nom_form) %>">
      The fandom you've entered isn't canonical. If you really want a new tag added, please give us some extra information?
      <dl>
        <dt><%= nom_form.label :parent_tagname, ts("Type of fandom") %></dt>
        <dd><%= nom_form.select :parent_tagname, options_for_select(Media.canonical.by_name.collect {|m| [m.name, m.name]}), :include_blank => true %></dd>

	 	    <dt><%= nom_form.label :tagnotes, ts("Notes") %></dt>
	 	    <dd><%= nom_form.text_area :tagnotes %></dd>
	 	  </dl>
	 	</dd>

    <% # if fandoms are being nominated then any character/relationship noms go under fandom %>
    <% %w(character relationship).each do |tag_type| %>
      <%= nom_form.fields_for "#{tag_type}_nominations".to_sym do |nom_form2| %>
        <dt><%= nom_form2.label :tagname, ts("#{tag_type.classify}") %>
        <dd>
          <% if nom_form2.object.approved  || nom_form2.object.rejected %>
            <%= nom_form2.object.tagname %>
          <% else %>
            <%= nom_form2.text_field :tagname, 
                      autocomplete_options("#{tag_type}_in_fandom", :autocomplete_token_limit => 1, 
                      :autocomplete_live_params => "fandom=tag_set_nomination_fandom_nominations_attributes_#{fandom_nominations_counter}_tagname") %>
          <% end %>
          <%= nomination_status(nom_form2.object) %>
        </dd>
      <% end %>
    <% end %>
  </dl>
</fieldset>
