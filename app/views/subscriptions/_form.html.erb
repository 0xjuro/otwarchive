<% if subscription.new_record? %>
  <%= form_for([current_user, subscription],
    method: 'post',
    html: { 
      class: 'ajax-create-destroy', 
      data: { 
        create_value: ts('Subscribe'),
        destroy_value: ts('Unsubscribe')
      }
    }) do |f| %>
    <%= f.hidden_field :subscribable_id %>
    <%= f.hidden_field :subscribable_type %>
    <%= f.submit ts('Subscribe') %>
  <% end %>
<% else %>
  <%= form_for([current_user, subscription],
    method: 'delete',
    html: { 
      class: 'ajax-create-destroy',
      data: { 
        create_value: ts('Subscribe'),
        destroy_value: ts('Unsubscribe')
      }
    }) do |f| %>
    <%= f.hidden_field :subscribable_id %>
    <%= f.hidden_field :subscribable_type %>
    <%= f.submit ts('Unsubscribe') %>
  <% end %>
<% end %>