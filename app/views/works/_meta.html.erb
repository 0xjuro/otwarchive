<h3 class="landmark">Work Header</h3>

<div class="wrapper">

<%- unless @preview_mode -%>
  <% if is_author_of?(work) -%>
    <ul class="navigation" role="navigation">
      <li><%= link_to t('edit_tags', :default => "Edit Tags"), url_for(:controller => :works, :id => work.id, :action => :edit_tags) %></li>
    </ul>
  <% end -%>
<%- end -%>

	<dl class="work meta" role="complementary">
  <%- work_tags = collect_work_tags(work) -%>
  <%- Tag::VISIBLE.each do |type| -%>
    <%- tags = work_tags.select{|tag| tag.type == type} -%>
    <%- unless tags.blank? -%>
      <dt class="<%= type.downcase -%>">
        <%- if type == "Warning" -%>
          <%= link_to( tags.size == 1 ? type.constantize::NAME : type.constantize::NAME.pluralize, tos_faq_path(:anchor => "tags") ) %>:
        <%- elsif type.constantize::NAME == ArchiveConfig.FREEFORM_CATEGORY_NAME -%>
          <%= type.constantize::NAME %>:
        <%- else -%>
          <%= tags.size == 1 ? type.constantize::NAME : type.constantize::NAME.pluralize %>:
        <%- end -%>
      </dt>

      <dd class="<%= type.downcase -%>">
      <ul id="work_<%= work.id %>_category_<%= type.downcase %>">
      <%- if type == "Warning" && !AdminSetting.enable_test_caching? && hide_warnings?(work) -%>        
        <li><%= show_warnings_link(work) %> </li>
      <%- elsif type == "Freeform" && !AdminSetting.enable_test_caching? && hide_freeform?(work) -%>
        <li><%= show_freeforms_link(work) %> </li>
      <%- else -%>                   
        <%= tag_link_list(tags) %>
      <%- end -%>
      </ul>
      </dd>
    <%- end -%>
  <%- end -%>
 <%- unless @work.series.blank? -%>
      <dt class="series">Series</dt>
		<dd class="series">
		<%= show_series_data(@work) %>
		</dd>
		<%- end -%>
		<dt class="stats">Stats<!--comment link and bookmark link should come out of here and go in navigation. comment count and bookmark count can remain--></dt>
		<dd class="stats"><%= work_meta_list(@work, @chapter) %></dd>
</dl>
</div>
