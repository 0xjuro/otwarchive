$j(".ajax-create-destroy").on("click",function(e){e.preventDefault();var t=$j(this);var n=t.attr("action");var r=t.find('[type="submit"]');var i=t.data("create-value");var s=t.data("destroy-value");var o=$j("#ajax_flash");$j.ajax({type:"POST",url:n,data:t.serialize(),dataType:"json",success:function(e){o.removeClass("error").empty();if(e.item_id){o.addClass("notice").text(e.item_success_message);r.val(s);t.append('<input name="_method" type="hidden" value="delete">');t.attr("action",n+"/"+e.item_id)}else{o.addClass("notice").text(e.item_success_message);r.val(i);t.find('input[name="_method"]').remove();t.attr("action",n.replace(/\/\d+/,""))}},error:function(e,t,n){o.empty();o.addClass("error notice");$j.each(jQuery.parseJSON(e.responseText).errors,function(e,t){o.append(t+" ")})}})});$j(".ajax-remove").on("click",function(e){e.preventDefault();var t=$j(this);var n=t.attr("action");var r=t.closest(".blurb");var i=r.closest("div");var s=i.find(".flash");$j.ajax({type:"POST",url:n,data:t.serialize(),dataType:"json",success:function(e){s.removeClass("error").empty();s.addClass("notice").text(e.item_success_message)},error:function(e,t,n){s.empty();s.addClass("error notice");$j.each(jQuery.parseJSON(e.responseText).errors,function(e,t){s.append(t+" ")})}});$j(document).ajaxSuccess(function(){r.slideUp(function(){$j(this).remove()})})})