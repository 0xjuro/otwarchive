$j(".ajax-create-destroy").on("click",function(e){e.preventDefault();var t=$j("#ajax_flash");var n=$j(this);var r=n.attr("action");var i=n.find('[type="submit"]');var s=n.data("create-value");var o=n.data("destroy-value");$j.ajax({type:"POST",url:r,data:n.serialize(),dataType:"json",success:function(e){t.removeClass("error").empty();if(e.item_id){t.addClass("notice").text(e.item_success_message);i.val(o);n.append('<input name="_method" type="hidden" value="delete">');n.attr("action",r+"/"+e.item_id)}else{t.addClass("notice").text(e.item_success_message);i.val(s);n.find('input[name="_method"]').remove();n.attr("action",r.replace(/\/\d+/,""))}},error:function(e,n,r){t.empty();t.addClass("error notice");$j.each(jQuery.parseJSON(e.responseText).errors,function(e,n){t.append(n+" ")})}})})