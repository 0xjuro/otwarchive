$j("#favorite_tag").on("click",function(e){e.preventDefault();var t=$j("#ajax_flash");var n=$j("#favorite_tag");var r=n.attr("action");var i=n.find('[type="submit"]');$j.ajax({type:"POST",url:r,data:n.serialize(),dataType:"json",error:function(e,n,r){t.addClass("error notice").text("Sorry, we could not save this favorite tag.")},success:function(e){if(e.favorite_tag_id){t.addClass("notice").text(e.favorite_tag_success);i.val("Unfavorite Tag");n.append('<input name="_method" type="hidden" value="delete">');n.attr("action",r+"/"+e.favorite_tag_id)}else{t.addClass("notice").text(e.favorite_tag_success);i.val("Favorite Tag");n.find('input[name="_method"]').remove();n.attr("action",r.replace(/\/\d+/,""))}}})})