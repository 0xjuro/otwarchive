<h2>Matching</h2>

<p>The matching process for gift exchanges runs in two stages: </p>
<dl>
  <dt>Potential Matching</dt>
  <dd>All the sign-ups are compared and for each person we generate a list of potential givers (people who can give them a gift), and potential recipients (people they can give a gift to). This is the slowest part of the process and can take as much as a day for a very large challenge or one where almost all the participants match each other.</dd>
  
  <dt>Assignments</dt>
  <dd>We try to give everyone a single assignment, starting with the people who have the fewest potential givers or recipients and working up until no one else can be assigned. This process is relatively fast; it generally completes within an hour.</dd>
</dl>

<p>You may have to decide how to fix several issues that can come up during matching.</p> 

<h3>Potential Match Issues</h3>

<h4 id="invalid_signups">Invalid Signups</h4>

<p>Sometimes a challenge can end up with one or more invalid signups -- duplicates, or signups that have too many or too few offers/requests or ones that don't fit the rules of your challenge. Most commonly, this happens if someone clicks submit or update multiple times because their connection to the archive is slow. It can also happen if you have changed the rules of 
your challenge partway through the signup process -- read further for details about this.</p>

<p>If this happens, potential matching won't run, and you'll be quickly emailed a list of links to the invalid signups so you can examine them. You can often tell easily when two signups or offers/requests are duplicates, in which case you can just delete the duplicates. Sometimes you may have to contact a participant to figure out which of the signups or prompts they want to use.</p>

<p>If on the other hand you made the signup rules more strict mid-stream and you have a large number of invalid signups as a result, you may only be able to fix this by easing your rules to match the lowest common denominator. For instance, if you started by requiring 2 offers and 2 requests, and then upped the requirement to 3 offers and 3 requests a day into signup, you may have a whole slew of signups that only have 2/2 and are now therefore considered invalid. To fix this, you'll have to change your challenge settings back to only <em>requiring</em> 2/2, while <em>allowing</em> 3/3.</p>

<p>After you have dealt with all the invalid signups, you can then start matching again.</p>

<h4>No Potential Recipients/No Potential Givers</h4>

<p>If someone has no potential recipients, that means no one wants what they are offering. There is no way to fix this unless the person agrees to 
  offer something else that someone has requested. If they do, you can edit their sign-up and then regenerate their potential matches.</p>
  
<p>If someone has no potential givers, no one has offered what they want. You can try to find a pinch hitter for them if you prefer. Otherwise,
  just as above, ask them to request something else, edit their sign-up, and then regenerate their potential matches.</p>
  
<h5>A Note About Regenerating Potential Matches</h5>

<p>Because regenerating ALL potential matches for everyone in your challenge is very slow, it is better to regenerate potential matches just for 
  each individual person who has no potential matches, which will most likely only take a few minutes. Just do them one at a time, please!</p>
  
<p>If you have several people with no potential matches, once you have regenerated potential matches for them, you may want to regenerate 
  assignments to have the archive try to assign them along with everyone else. Note that this will very likely change the assignments for 
  EVERYONE. </p>  
  
<h3>Assignment Issues</h3>

<p>Once you have <em>potential</em> matches for everyone, the remaining problems are with getting people assigned.</p>

<h4>No Assigned Giver</h4>

<p>These people could not be assigned a giver. You can shuffle the main assignments to free someone up, or you can assign a pinch hitter. 
  Note: the form <em>will</em> allow you to double-assign people, but remember to make sure they can write two assignments first!
</p>

<h4>No Assigned Recipient</h4>

<p>These people haven't been assigned a recipient. Try shuffling the assigned givers in the main assignments. 
  The newly matched people will disappear from this section after you update. Otherwise, you can manually assign 
  a pinch recipient.
</p>

<h5>About Pinch Recipients</h5>

<p>
  A "pinch recipient" is someone who is assigned to <strong>get</strong> an extra gift, just like
  pinch hitters are assigned to <strong>give</strong> an extra gift. 
</p> 

<p>
  The reason you would assign a pinch recipient is that sometimes in a gift exchange, it may not be possible to get everyone 
  assigned one on one. Instead of shuffling to try and match everybody, you can instead recruit a few pinch hitters for the 
  people who don't have an assigned writer, and assign "pinch recipients" for the people who don't have a request of their own. 
</p>

<p>
  Pinch recipients must be people signed up for the challenge. As far as the person getting the assignment is concerned, 
  they will not see a difference between a pinch recipient and a regular recipient. The recipient will just have two 
  givers, and assuming neither one defaults, will get two gifts instead of one. 
</p>

<h4>Shuffling Assignments</h4>

<p>Finally, even if everyone has a recipient and a giver, you may still want to shuffle assignments around in order to 
  give people better matches. You can do so as much as you want. </p>

<p>Please note that circular matches (where A is assigned to B and B is assigned to A)
    will happen sometimes randomly. You can try and reshuffle by hand if you want to avoid these. 
  </p>
